<!DOCTYPE html><html><head><meta charset="utf-8"><style>body {
  width: 45em;
  border: 1px solid #ddd;
  outline: 1300px solid #fff;
  margin: 16px auto;
}

body .markdown-body
{
  padding: 30px;
}

@font-face {
  font-family: fontawesome-mini;
  src: url(data:font/woff;charset=utf-8;base64,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) format('woff');
}

@font-face {
  font-family: octicons-anchor;
  src: url(data:font/woff;charset=utf-8;base64,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) format('woff');
}

.markdown-body {
  font-family: sans-serif;
  -ms-text-size-adjust: 100%;
  -webkit-text-size-adjust: 100%;
  color: #333333;
  overflow: hidden;
  font-family: "Helvetica Neue", Helvetica, "Segoe UI", Arial, freesans, sans-serif;
  font-size: 16px;
  line-height: 1.6;
  word-wrap: break-word;
}

.markdown-body a {
  background: transparent;
}

.markdown-body a:active,
.markdown-body a:hover {
  outline: 0;
}

.markdown-body b,
.markdown-body strong {
  font-weight: bold;
}

.markdown-body mark {
  background: #ff0;
  color: #000;
  font-style: italic;
  font-weight: bold;
}

.markdown-body sub,
.markdown-body sup {
  font-size: 75%;
  line-height: 0;
  position: relative;
  vertical-align: baseline;
}
.markdown-body sup {
  top: -0.5em;
}
.markdown-body sub {
  bottom: -0.25em;
}

.markdown-body h1 {
  font-size: 2em;
  margin: 0.67em 0;
}

.markdown-body img {
  border: 0;
}

.markdown-body hr {
  -moz-box-sizing: content-box;
  box-sizing: content-box;
  height: 0;
}

.markdown-body pre {
  overflow: auto;
}

.markdown-body code,
.markdown-body kbd,
.markdown-body pre,
.markdown-body samp {
  font-family: monospace, monospace;
  font-size: 1em;
}

.markdown-body input {
  color: inherit;
  font: inherit;
  margin: 0;
}

.markdown-body html input[disabled] {
  cursor: default;
}

.markdown-body input {
  line-height: normal;
}

.markdown-body input[type="checkbox"] {
  box-sizing: border-box;
  padding: 0;
}

.markdown-body table {
  border-collapse: collapse;
  border-spacing: 0;
}

.markdown-body td,
.markdown-body th {
  padding: 0;
}

.markdown-body .codehilitetable {
  border: 0;
  border-spacing: 0;
}

.markdown-body .codehilitetable tr {
  border: 0;
}

.markdown-body .codehilitetable pre,
.markdown-body .codehilitetable div.codehilite {
  margin: 0;
}

.markdown-body .linenos,
.markdown-body .code,
.markdown-body .codehilitetable td {
  border: 0;
  padding: 0;
}

.markdown-body td:not(.linenos) .linenodiv {
  padding: 0 !important;
}

.markdown-body .code {
  width: 100%;
}

.markdown-body .linenos div pre,
.markdown-body .linenodiv pre,
.markdown-body .linenodiv {
  border: 0;
  -webkit-border-radius: 0;
  -moz-border-radius: 0;
  border-radius: 0;
  -webkit-border-top-left-radius: 3px;
  -webkit-border-bottom-left-radius: 3px;
  -moz-border-radius-topleft: 3px;
  -moz-border-radius-bottomleft: 3px;
  border-top-left-radius: 3px;
  border-bottom-left-radius: 3px;
}

.markdown-body .code div pre,
.markdown-body .code div {
  border: 0;
  -webkit-border-radius: 0;
  -moz-border-radius: 0;
  border-radius: 0;
  -webkit-border-top-right-radius: 3px;
  -webkit-border-bottom-right-radius: 3px;
  -moz-border-radius-topright: 3px;
  -moz-border-radius-bottomright: 3px;
  border-top-right-radius: 3px;
  border-bottom-right-radius: 3px;
}

.markdown-body * {
  -moz-box-sizing: border-box;
  box-sizing: border-box;
}

.markdown-body input {
  font: 13px Helvetica, arial, freesans, clean, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol";
  line-height: 1.4;
}

.markdown-body a {
  color: #4183c4;
  text-decoration: none;
}

.markdown-body a:hover,
.markdown-body a:focus,
.markdown-body a:active {
  text-decoration: underline;
}

.markdown-body hr {
  height: 0;
  margin: 15px 0;
  overflow: hidden;
  background: transparent;
  border: 0;
  border-bottom: 1px solid #ddd;
}

.markdown-body hr:before,
.markdown-body hr:after {
  display: table;
  content: " ";
}

.markdown-body hr:after {
  clear: both;
}

.markdown-body h1,
.markdown-body h2,
.markdown-body h3,
.markdown-body h4,
.markdown-body h5,
.markdown-body h6 {
  margin-top: 15px;
  margin-bottom: 15px;
  line-height: 1.1;
}

.markdown-body h1 {
  font-size: 30px;
}

.markdown-body h2 {
  font-size: 21px;
}

.markdown-body h3 {
  font-size: 16px;
}

.markdown-body h4 {
  font-size: 14px;
}

.markdown-body h5 {
  font-size: 12px;
}

.markdown-body h6 {
  font-size: 11px;
}

.markdown-body blockquote {
  margin: 0;
}

.markdown-body ul,
.markdown-body ol {
  padding: 0;
  margin-top: 0;
  margin-bottom: 0;
}

.markdown-body ol ol,
.markdown-body ul ol {
  list-style-type: lower-roman;
}

.markdown-body ul ul ol,
.markdown-body ul ol ol,
.markdown-body ol ul ol,
.markdown-body ol ol ol {
  list-style-type: lower-alpha;
}

.markdown-body dd {
  margin-left: 0;
}

.markdown-body code,
.markdown-body pre,
.markdown-body samp {
  font-family: Consolas, "Liberation Mono", Menlo, Courier, monospace;
  font-size: 12px;
}

.markdown-body pre {
  margin-top: 0;
  margin-bottom: 0;
}

.markdown-body kbd {
  background-color: #e7e7e7;
  background-image: -moz-linear-gradient(#fefefe, #e7e7e7);
  background-image: -webkit-linear-gradient(#fefefe, #e7e7e7);
  background-image: linear-gradient(#fefefe, #e7e7e7);
  background-repeat: repeat-x;
  border-radius: 2px;
  border: 1px solid #cfcfcf;
  color: #000;
  padding: 3px 5px;
  line-height: 10px;
  font: 11px Consolas, "Liberation Mono", Menlo, Courier, monospace;
  display: inline-block;
}

.markdown-body>*:first-child {
  margin-top: 0 !important;
}

.markdown-body>*:last-child {
  margin-bottom: 0 !important;
}

.markdown-body .headeranchor-link {
  position: absolute;
  top: 0;
  bottom: 0;
  left: 0;
  display: block;
  padding-right: 6px;
  padding-left: 30px;
  margin-left: -30px;
}

.markdown-body .headeranchor-link:focus {
  outline: none;
}

.markdown-body h1,
.markdown-body h2,
.markdown-body h3,
.markdown-body h4,
.markdown-body h5,
.markdown-body h6 {
  position: relative;
  margin-top: 1em;
  margin-bottom: 16px;
  font-weight: bold;
  line-height: 1.4;
}

.markdown-body h1 .headeranchor,
.markdown-body h2 .headeranchor,
.markdown-body h3 .headeranchor,
.markdown-body h4 .headeranchor,
.markdown-body h5 .headeranchor,
.markdown-body h6 .headeranchor {
  display: none;
  color: #000;
  vertical-align: middle;
}

.markdown-body h1:hover .headeranchor-link,
.markdown-body h2:hover .headeranchor-link,
.markdown-body h3:hover .headeranchor-link,
.markdown-body h4:hover .headeranchor-link,
.markdown-body h5:hover .headeranchor-link,
.markdown-body h6:hover .headeranchor-link {
  height: 1em;
  padding-left: 8px;
  margin-left: -30px;
  line-height: 1;
  text-decoration: none;
}

.markdown-body h1:hover .headeranchor-link .headeranchor,
.markdown-body h2:hover .headeranchor-link .headeranchor,
.markdown-body h3:hover .headeranchor-link .headeranchor,
.markdown-body h4:hover .headeranchor-link .headeranchor,
.markdown-body h5:hover .headeranchor-link .headeranchor,
.markdown-body h6:hover .headeranchor-link .headeranchor {
  display: inline-block;
}

.markdown-body h1 {
  padding-bottom: 0.3em;
  font-size: 2.25em;
  line-height: 1.2;
  border-bottom: 1px solid #eee;
}

.markdown-body h2 {
  padding-bottom: 0.3em;
  font-size: 1.75em;
  line-height: 1.225;
  border-bottom: 1px solid #eee;
}

.markdown-body h3 {
  font-size: 1.5em;
  line-height: 1.43;
}

.markdown-body h4 {
  font-size: 1.25em;
}

.markdown-body h5 {
  font-size: 1em;
}

.markdown-body h6 {
  font-size: 1em;
  color: #777;
}

.markdown-body p,
.markdown-body blockquote,
.markdown-body ul,
.markdown-body ol,
.markdown-body dl,
.markdown-body table,
.markdown-body pre,
.markdown-body .admonition {
  margin-top: 0;
  margin-bottom: 16px;
}

.markdown-body hr {
  height: 4px;
  padding: 0;
  margin: 16px 0;
  background-color: #e7e7e7;
  border: 0 none;
}

.markdown-body ul,
.markdown-body ol {
  padding-left: 2em;
}

.markdown-body ul ul,
.markdown-body ul ol,
.markdown-body ol ol,
.markdown-body ol ul {
  margin-top: 0;
  margin-bottom: 0;
}

.markdown-body li>p {
  margin-top: 16px;
}

.markdown-body dl {
  padding: 0;
}

.markdown-body dl dt {
  padding: 0;
  margin-top: 16px;
  font-size: 1em;
  font-style: italic;
  font-weight: bold;
}

.markdown-body dl dd {
  padding: 0 16px;
  margin-bottom: 16px;
}

.markdown-body blockquote {
  padding: 0 15px;
  color: #777;
  border-left: 4px solid #ddd;
}

.markdown-body blockquote>:first-child {
  margin-top: 0;
}

.markdown-body blockquote>:last-child {
  margin-bottom: 0;
}

.markdown-body table {
  display: block;
  width: 100%;
  overflow: auto;
  word-break: normal;
  word-break: keep-all;
}

.markdown-body table th {
  font-weight: bold;
}

.markdown-body table th,
.markdown-body table td {
  padding: 6px 13px;
  border: 1px solid #ddd;
}

.markdown-body table tr {
  background-color: #fff;
  border-top: 1px solid #ccc;
}

.markdown-body table tr:nth-child(2n) {
  background-color: #f8f8f8;
}

.markdown-body img {
  max-width: 100%;
  -moz-box-sizing: border-box;
  box-sizing: border-box;
}

.markdown-body code,
.markdown-body samp {
  padding: 0;
  padding-top: 0.2em;
  padding-bottom: 0.2em;
  margin: 0;
  font-size: 85%;
  background-color: rgba(0,0,0,0.04);
  border-radius: 3px;
}

.markdown-body code:before,
.markdown-body code:after {
  letter-spacing: -0.2em;
  content: "\00a0";
}

.markdown-body pre>code {
  padding: 0;
  margin: 0;
  font-size: 100%;
  word-break: normal;
  white-space: pre;
  background: transparent;
  border: 0;
}

.markdown-body .codehilite {
  margin-bottom: 16px;
}

.markdown-body .codehilite pre,
.markdown-body pre {
  padding: 16px;
  overflow: auto;
  font-size: 85%;
  line-height: 1.45;
  background-color: #f7f7f7;
  border-radius: 3px;
}

.markdown-body .codehilite pre {
  margin-bottom: 0;
  word-break: normal;
}

.markdown-body pre {
  word-wrap: normal;
}

.markdown-body pre code {
  display: inline;
  max-width: initial;
  padding: 0;
  margin: 0;
  overflow: initial;
  line-height: inherit;
  word-wrap: normal;
  background-color: transparent;
  border: 0;
}

.markdown-body pre code:before,
.markdown-body pre code:after {
  content: normal;
}

/* Admonition */
.markdown-body .admonition {
  -webkit-border-radius: 3px;
  -moz-border-radius: 3px;
  position: relative;
  border-radius: 3px;
  border: 1px solid #e0e0e0;
  border-left: 6px solid #333;
  padding: 10px 10px 10px 30px;
}

.markdown-body .admonition table {
  color: #333;
}

.markdown-body .admonition p {
  padding: 0;
}

.markdown-body .admonition-title {
  font-weight: bold;
  margin: 0;
}

.markdown-body .admonition>.admonition-title {
  color: #333;
}

.markdown-body .attention>.admonition-title {
  color: #a6d796;
}

.markdown-body .caution>.admonition-title {
  color: #d7a796;
}

.markdown-body .hint>.admonition-title {
  color: #96c6d7;
}

.markdown-body .danger>.admonition-title {
  color: #c25f77;
}

.markdown-body .question>.admonition-title {
  color: #96a6d7;
}

.markdown-body .note>.admonition-title {
  color: #d7c896;
}

.markdown-body .admonition:before,
.markdown-body .attention:before,
.markdown-body .caution:before,
.markdown-body .hint:before,
.markdown-body .danger:before,
.markdown-body .question:before,
.markdown-body .note:before {
  font: normal normal 16px fontawesome-mini;
  -moz-osx-font-smoothing: grayscale;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
  line-height: 1.5;
  color: #333;
  position: absolute;
  left: 0;
  top: 0;
  padding-top: 10px;
  padding-left: 10px;
}

.markdown-body .admonition:before {
  content: "\f056\00a0";
  color: 333;
}

.markdown-body .attention:before {
  content: "\f058\00a0";
  color: #a6d796;
}

.markdown-body .caution:before {
  content: "\f06a\00a0";
  color: #d7a796;
}

.markdown-body .hint:before {
  content: "\f05a\00a0";
  color: #96c6d7;
}

.markdown-body .danger:before {
  content: "\f057\00a0";
  color: #c25f77;
}

.markdown-body .question:before {
  content: "\f059\00a0";
  color: #96a6d7;
}

.markdown-body .note:before {
  content: "\f040\00a0";
  color: #d7c896;
}

.markdown-body .admonition::after {
  content: normal;
}

.markdown-body .attention {
  border-left: 6px solid #a6d796;
}

.markdown-body .caution {
  border-left: 6px solid #d7a796;
}

.markdown-body .hint {
  border-left: 6px solid #96c6d7;
}

.markdown-body .danger {
  border-left: 6px solid #c25f77;
}

.markdown-body .question {
  border-left: 6px solid #96a6d7;
}

.markdown-body .note {
  border-left: 6px solid #d7c896;
}

.markdown-body .admonition>*:first-child {
  margin-top: 0 !important;
}

.markdown-body .admonition>*:last-child {
  margin-bottom: 0 !important;
}

/* progress bar*/
.markdown-body .progress {
  display: block;
  width: 300px;
  margin: 10px 0;
  height: 24px;
  -webkit-border-radius: 3px;
  -moz-border-radius: 3px;
  border-radius: 3px;
  background-color: #ededed;
  position: relative;
  box-shadow: inset -1px 1px 3px rgba(0, 0, 0, .1);
}

.markdown-body .progress-label {
  position: absolute;
  text-align: center;
  font-weight: bold;
  width: 100%; margin: 0;
  line-height: 24px;
  color: #333;
  text-shadow: 1px 1px 0 #fefefe, -1px -1px 0 #fefefe, -1px 1px 0 #fefefe, 1px -1px 0 #fefefe, 0 1px 0 #fefefe, 0 -1px 0 #fefefe, 1px 0 0 #fefefe, -1px 0 0 #fefefe, 1px 1px 2px #000;
  -webkit-font-smoothing: antialiased !important;
  white-space: nowrap;
  overflow: hidden;
}

.markdown-body .progress-bar {
  height: 24px;
  float: left;
  -webkit-border-radius: 3px;
  -moz-border-radius: 3px;
  border-radius: 3px;
  background-color: #96c6d7;
  box-shadow: inset 0 1px 0 rgba(255, 255, 255, .5), inset 0 -1px 0 rgba(0, 0, 0, .1);
  background-size: 30px 30px;
  background-image: -webkit-linear-gradient(
    135deg, rgba(255, 255, 255, .4) 27%,
    transparent 27%,
    transparent 52%, rgba(255, 255, 255, .4) 52%,
    rgba(255, 255, 255, .4) 77%,
    transparent 77%, transparent
  );
  background-image: -moz-linear-gradient(
    135deg,
    rgba(255, 255, 255, .4) 27%, transparent 27%,
    transparent 52%, rgba(255, 255, 255, .4) 52%,
    rgba(255, 255, 255, .4) 77%, transparent 77%,
    transparent
  );
  background-image: -ms-linear-gradient(
    135deg,
    rgba(255, 255, 255, .4) 27%, transparent 27%,
    transparent 52%, rgba(255, 255, 255, .4) 52%,
    rgba(255, 255, 255, .4) 77%, transparent 77%,
    transparent
  );
  background-image: -o-linear-gradient(
    135deg,
    rgba(255, 255, 255, .4) 27%, transparent 27%,
    transparent 52%, rgba(255, 255, 255, .4) 52%,
    rgba(255, 255, 255, .4) 77%, transparent 77%,
    transparent
  );
  background-image: linear-gradient(
    135deg,
    rgba(255, 255, 255, .4) 27%, transparent 27%,
    transparent 52%, rgba(255, 255, 255, .4) 52%,
    rgba(255, 255, 255, .4) 77%, transparent 77%,
    transparent
  );
}

.markdown-body .progress-100plus .progress-bar {
  background-color: #a6d796;
}

.markdown-body .progress-80plus .progress-bar {
  background-color: #c6d796;
}

.markdown-body .progress-60plus .progress-bar {
  background-color: #d7c896;
}

.markdown-body .progress-40plus .progress-bar {
  background-color: #d7a796;
}

.markdown-body .progress-20plus .progress-bar {
  background-color: #d796a6;
}

.markdown-body .progress-0plus .progress-bar {
  background-color: #c25f77;
}

.markdown-body .candystripe-animate .progress-bar{
  -webkit-animation: animate-stripes 3s linear infinite;
  -moz-animation: animate-stripes 3s linear infinite;
  animation: animate-stripes 3s linear infinite;
}

@-webkit-keyframes animate-stripes {
  0% {
    background-position: 0 0;
  }

  100% {
    background-position: 60px 0;
  }
}

@-moz-keyframes animate-stripes {
  0% {
    background-position: 0 0;
  }

  100% {
    background-position: 60px 0;
  }
}

@keyframes animate-stripes {
  0% {
    background-position: 0 0;
  }

  100% {
    background-position: 60px 0;
  }
}

.markdown-body .gloss .progress-bar {
  box-shadow:
    inset 0 4px 12px rgba(255, 255, 255, .7),
    inset 0 -12px 0 rgba(0, 0, 0, .05);
}

/* Multimarkdown Critic Blocks */
.markdown-body .critic_mark {
  background: #ff0;
}

.markdown-body .critic_delete {
  color: #c82829;
  text-decoration: line-through;
}

.markdown-body .critic_insert {
  color: #718c00 ;
  text-decoration: underline;
}

.markdown-body .critic_comment {
  color: #8e908c;
  font-style: italic;
}

.markdown-body .headeranchor {
  font: normal normal 16px octicons-anchor;
  line-height: 1;
  display: inline-block;
  text-decoration: none;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

.headeranchor:before {
  content: '\f05c';
}

.markdown-body .task-list-item {
  list-style-type: none;
}

.markdown-body .task-list-item+.task-list-item {
  margin-top: 3px;
}

.markdown-body .task-list-item input {
  margin: 0 4px 0.25em -20px;
  vertical-align: middle;
}

/* Media */
@media only screen and (min-width: 480px) {
  .markdown-body {
    font-size:14px;
  }
}

@media only screen and (min-width: 768px) {
  .markdown-body {
    font-size:16px;
  }
}

@media print {
  .markdown-body * {
    background: transparent !important;
    color: black !important;
    filter:none !important;
    -ms-filter: none !important;
  }

  .markdown-body {
    font-size:12pt;
    max-width:100%;
    outline:none;
    border: 0;
  }

  .markdown-body a,
  .markdown-body a:visited {
    text-decoration: underline;
  }

  .markdown-body .headeranchor-link {
    display: none;
  }

  .markdown-body a[href]:after {
    content: " (" attr(href) ")";
  }

  .markdown-body abbr[title]:after {
    content: " (" attr(title) ")";
  }

  .markdown-body .ir a:after,
  .markdown-body a[href^="javascript:"]:after,
  .markdown-body a[href^="#"]:after {
    content: "";
  }

  .markdown-body pre {
    white-space: pre;
    white-space: pre-wrap;
    word-wrap: break-word;
  }

  .markdown-body pre,
  .markdown-body blockquote {
    border: 1px solid #999;
    padding-right: 1em;
    page-break-inside: avoid;
  }

  .markdown-body .progress,
  .markdown-body .progress-bar {
    -moz-box-shadow: none;
    -webkit-box-shadow: none;
    box-shadow: none;
  }

  .markdown-body .progress {
    border: 1px solid #ddd;
  }

  .markdown-body .progress-bar {
    height: 22px;
    border-right: 1px solid #ddd;
  }

  .markdown-body tr,
  .markdown-body img {
    page-break-inside: avoid;
  }

  .markdown-body img {
    max-width: 100% !important;
  }

  .markdown-body p,
  .markdown-body h2,
  .markdown-body h3 {
    orphans: 3;
    widows: 3;
  }

  .markdown-body h2,
  .markdown-body h3 {
    page-break-after: avoid;
  }
}
</style><title>ThaiPH_docker_macvlan_VLAN</title></head><body><article class="markdown-body"><h1 id="docker-networking-macvlan-voi-vlan"><a name="user-content-docker-networking-macvlan-voi-vlan" href="#docker-networking-macvlan-voi-vlan" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Docker Networking: macvlan với VLAN</h1>
<h1 id="muc-luc"><a name="user-content-muc-luc" href="#muc-luc" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Mục lục</h1>
<p><h3><a href="#topo">1. Topology</a></h3><br />
<h3><a href="#cfg">2. Cài đặt và cấu hình</a></h3><br />
<ul><br />
    <li><a href="#host_net">2.1. Cài đặt OpenvSwitch, KVM và cấu hình libvirt network</a></li><br />
    <li><a href="#docker_host_cfg">2.2. Cấu hình các Docker host</a></li><br />
    <li><a href="#container_test">2.3. kiểm tra kết nối</a></li><br />
</ul><br />
<h3><a href="#ref">3. Tham khảo</a></h3></p>
<hr />
<h2><a name="topo">1. Topology</a></h2>

<div>
    <img src="http://i.imgur.com/nUq4mzx.png">
    <br><br>
    Chuẩn bị:
    <ul>
        <li>Một máy <b>HOST</b> chạy ubuntu desktop 14.04, cài OpenvSwitch + KVM + Virt Manager</li>
        <li>Tạo hai KVM docker host trên máy <b>HOST</b> chạy ubuntu desktop 14.04, trên mỗi máy cài đặt sẵn <b>docker</b> (thời điểm bài lab thực hiện đang cài phiên bản 1.12) và <b>vlan</b> driver.</li>
    </ul>
</div>

<h2><a name="cfg">2. Cài đặt và cấu hình</a></h2>

<ul>
    <li><h3><a name="host_net">2.1. Cài đặt OpenvSwitch, KVM và cấu hình libvirt network</a></h3>
    <div>
    Tất cả các thao tác sau thực hiện trên máy <b>HOST</b>
    <h4>Cài đặt KVM và virt-manager</h4>  
    <div>
    Cài đặt các gói sau:
    <pre>
        <code>
    sudo apt-get install ubuntu-virt-server python-vm-builder kvm-ipxe bridge-utils libguestfs-tools qemu-kvm libvirt-bin ubuntu-vm-builder
        </code>
    </pre>
    Thực hiện đưa người dùng hiện tại vào nhóm <b>libvirtd</b>
    <pre>
        <code>
    sudo adduser `id -un` libvirtd
        </code>
    </pre>
    Cài đặt thêm công cụ <b>virt-manager</b> để quản lý các máy ảo giao diện đồ họa:
    <pre>
        <code>
    sudo apt-get install virt-manager
        </code>
    </pre>
    </div>

    <h4>Cài đặt OpenvSwitch</h4>   
    <div>
    Cài đặt các gói sau:
    <pre>
        <code>
    sudo apt-get install -y openvswitch-switch openvswitch-datapath-dkms
        </code>
    </pre>
    Tạo bridge <code>br-int</code>:
    <pre>
        <code>
    sudo ovs-vsctl add-br br-int
        </code>
    </pre>
    Tạo libvirt network tương ứng với bridge <code>br-int</code>, định nghĩa trong một file *xml. Thực hiện tạo file cấu hình libvirt network: <code>vi ovs-net.xml</code>. Nội dung file <code>ovs-net.xml</code> như sau:
    <pre>
        <code>
&lt;network&gt;
  &lt;name&gt;ovs-network&lt;/name&gt;
  &lt;forward mode='bridge'/&gt;
  &lt;bridge name='br-int'/&gt;
  &lt;virtualport type='openvswitch'/&gt;
  &lt;portgroup name='vlan-00' default='yes'&gt;
  &lt;/portgroup&gt;
  &lt;portgroup name='vlan-100'&gt;
    &lt;vlan&gt;
      &lt;tag id='100'/&gt;
    &lt;/vlan&gt;
  &lt;/portgroup&gt;
  &lt;portgroup name='vlan-200'&gt;
    &lt;vlan&gt;
      &lt;tag id='200'/&gt;
    &lt;/vlan&gt;
  &lt;/portgroup&gt;
  &lt;portgroup name='vlan-all'&gt;
    &lt;vlan trunk='yes'&gt;
      &lt;tag id='100'/&gt;
      &lt;tag id='200'/&gt;
    &lt;/vlan&gt;
  &lt;/portgroup&gt;
&lt;/network&gt;    
        </code>
    </pre>
    File cấu hình ở trên thực hiện cấu hình network <b>ovs-network</b> tương ứng với 3 port group trên bridge <b>br-int</b>, 1 group dành cho vlan 100 (tag=100), một port group dành cho vlan 200 (tag=200) và 1 port group là dành cho các kết nối trunking.
    <br>Lưu lại file cấu hình và áp dụng cấu hình network trên cho máy <b>HOST</b>
    <pre>
        <code>
virsh net-define ovs-net.xml
# khoi dong network <b>ovs-network</b> 
virsh net-start ovs-network
# tu dong cau hinh khi khoi dong lai
virsh net-autostart ovs-network
        </code>
    </pre>
    </div> 

    </div>
    </li>

    <li><h3><a name="docker_host_cfg">2.2. Cấu hình các Docker host</a></h3>
    <div>
        <h4>Cấu hình network cho các Docker host</h4>
        <div>
        Với mỗi docker host, ta tạo hai card mạng:
        <ul>
            <li>
            Một card gán vào network <b>ovs-network</b> đã tạo ở trên thuộc port group <b>vlan-all</b>, bài lab này chọn card <b>eth0</b>, nhằm mục đích tạo đường trunk giữa card này với bridge <b>br-int</b> cho phép lưu lượng từ 2 vlan 100 và 200 trên các sub-interfaces đi qua.
            </li>

            <li>
            Một card kết nối internet, bài lab này chọn card <b>eth1</b> chế độ <b>default</b> hay chính là chế độ <b>NAT</b> mặc định khi sử dụng libvirt network(có thể chọn chế độ khác chẳng hạn như macvlan chế độ bridge). Mục đích card này để kết nối với internet cho các docker host, cài đặt các gói phần mềm.
            </li>
        </ul>

<pre><code>    Điểm cần chú ý duy nhất ở đây là cấu hình kết nối card &lt;b&gt;eth0&lt;/b&gt; của mỗi docker host kết nối vào port group &lt;b&gt;vlan-all&lt;/b&gt; của network &lt;b&gt;ovs-network&lt;/b&gt;. Để làm điều đó, trên máy &lt;b&gt;HOST&lt;/b&gt; (host chứa 2 docker host), thực hiện chỉnh sửa cấu hình 2 docker host như sau (ở đây ví dụ cấu hình cho docker host 0, docker host 1 tương tự):
    &lt;ul&gt;
        &lt;li&gt;Mở file cấu hình máy ảo docker host 0, chú ý gõ chính xác tên máy ảo:
    &lt;pre&gt;
        &lt;code&gt;
</code></pre>
<p>virsh edit docker-host0<br />
            </code><br />
        </pre><br />
            </li><br />
            <li>Chỉnh sửa lại trong section <code>&lt;network&gt;</code> như sau:<br />
        <pre><br />
            <code></p>
<pre><code>        &lt;/code&gt;
    &lt;/pre&gt;
        &lt;/li&gt;
    &lt;/ul&gt;
    Lưu lại các file cấu hình và bật hai máy ảo docker host lên, sau đó kiểm tra lại bằng lệnh sau để xác nhận đã cấu hình đúng:
    &lt;pre&gt;
        &lt;code&gt;
</code></pre>
<p>sudo ovs-vsctl show<br />
            </code><br />
        </pre><br />
        Kết quả trả về sẽ tương tự như sau:<br />
        <pre><br />
            <code></p>
<pre><code>        &lt;/code&gt;
    &lt;/pre&gt;
    Nếu cấu hình thành công, ta sẽ thấy kết quả lệnh trên xuất hiện 2 port &lt;b&gt;vnet0&lt;/b&gt; và &lt;b&gt;vnet1&lt;/b&gt; trên bridge &lt;b&gt;br-int&lt;/b&gt; cấu hình là port trunk với hai vlan 100 và 200. Chú ý, hai port &lt;b&gt;vnet0&lt;/b&gt; và &lt;b&gt;vnet1&lt;/b&gt; được gọi là các &lt;b&gt;tap interface&lt;/b&gt; trên bridge &lt;b&gt;br-int&lt;/b&gt; nơi mà các máy ảo gắn vào.
    &lt;/div&gt;

    &lt;h4&gt;Cài đặt vlan driver&lt;/h4&gt;
    Trên mỗi máy Docker host cài đặt vlan driver như sau:
    &lt;div&gt;
&lt;pre&gt;
    &lt;code&gt;
</code></pre>
<p>sudo apt-get install vlan</p>
<h1 id="load-kernel-module"><a name="user-content-load-kernel-module" href="#load-kernel-module" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>load kernel module</h1>
<p>sudo modprobe 8021q<br />
        </code><br />
    </pre>          <br />
        </div></p>
<pre><code>    &lt;h4&gt;Tạo các vlan sub-interfaces&lt;/h4&gt;
    &lt;div&gt;
    Trên mỗi máy docker host thực hiện tạo 2 VLAN sub-interfaces tag 100 và 200  trên card &lt;b&gt;eth0&lt;/b&gt; tương ứng với 2 vlan đã cấu hình trên bridge &lt;b&gt;br-int&lt;/b&gt;:
&lt;pre&gt;
    &lt;code&gt;
</code></pre>
<p>sudo vconfig add eth0 100<br />
sudo vconfig add eth0 200</p>
<h1 id="up-2-sub-interfaces"><a name="user-content-up-2-sub-interfaces" href="#up-2-sub-interfaces" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>up 2 sub-interfaces</h1>
<p>sudo ifconfig eth0.100 up<br />
sudo ifconfig eth0.200 up<br />
        </code><br />
    </pre><br />
        Kiểm tra 2 VLAN interfaces đã tạo:<br />
    <pre><br />
        <code><br />
cat /proc/net/vlan/config</p>
<h1 id="ket-qua-tra-ve-tuong-tu-nhu-sau"><a name="user-content-ket-qua-tra-ve-tuong-tu-nhu-sau" href="#ket-qua-tra-ve-tuong-tu-nhu-sau" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>ket qua tra ve tuong tu nhu sau</h1>
<p>VLAN Dev name    | VLAN ID<br />
Name-Type: VLAN_NAME_TYPE_RAW_PLUS_VID_NO_PAD<br />
eth0.100       | 100  | eth0<br />
eth0.200       | 200  | eth0<br />
        </code><br />
    </pre><br />
        </div></p>
<pre><code>    &lt;h4&gt;Tạo các macvlan network&lt;/h4&gt;
    &lt;div&gt;
    &lt;ul&gt;
        &lt;li&gt;&lt;b&gt;Docker host 0&lt;/b&gt;
        &lt;div&gt;
            Tạo hai network &lt;b&gt;macvlan100&lt;/b&gt; và &lt;b&gt;macvlan200&lt;/b&gt; tương ứng với 2 vlan 100 và 200 và tương ứng với hai &lt;b&gt;parent interface&lt;/b&gt; là &lt;b&gt;eth0.100&lt;/b&gt; và &lt;b&gt;eth0.200&lt;/b&gt;. Sau đó với mỗi macvlan network, tạo 2 container gắn vào để kiểm tra:
&lt;pre&gt;
    &lt;code&gt;
</code></pre>
<h1 id="tao-network-macvlan100"><a name="user-content-tao-network-macvlan100" href="#tao-network-macvlan100" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>tao network <b>macvlan100</b></h1>
<p>docker network  create  -d macvlan \<br />
   &ndash;subnet=172.16.0.0/16 \<br />
    &ndash;ip-range=172.16.1.0/24 \<br />
    -o macvlan_mode=bridge \<br />
    -o parent=eth0.100 macvlan100</p>
<h1 id="tao-container-gan-vao-network-macvlan100"><a name="user-content-tao-container-gan-vao-network-macvlan100" href="#tao-container-gan-vao-network-macvlan100" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>tao container gan vao network <b>macvlan100</b></h1>
<p>docker run &ndash;net=macvlan100 -itd &ndash;name macvlan100_1 alpine /bin/sh<br />
docker run &ndash;net=macvlan100 -itd &ndash;name macvlan100_2 alpine /bin/sh</p>
<h1 id="tao-network-macvlan200"><a name="user-content-tao-network-macvlan200" href="#tao-network-macvlan200" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>tao network <b>macvlan200</b></h1>
<p>docker network  create  -d macvlan \<br />
   &ndash;subnet=10.10.0.0/16 \<br />
    &ndash;ip-range=10.10.1.0/24 \<br />
    -o macvlan_mode=bridge \<br />
    -o parent=eth0.200 macvlan200</p>
<h1 id="tao-container-gan-vao-network-macvlan200"><a name="user-content-tao-container-gan-vao-network-macvlan200" href="#tao-container-gan-vao-network-macvlan200" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>tao container gan vao network <b>macvlan200</b></h1>
<p>docker run &ndash;net=macvlan200 -itd &ndash;name macvlan200_1 alpine /bin/sh<br />
docker run &ndash;net=macvlan200 -itd &ndash;name macvlan200_2 alpine /bin/sh<br />
        </code><br />
    </pre><br />
            </div><br />
            </li></p>
<pre><code>        &lt;li&gt;&lt;b&gt;Docker host 1&lt;/b&gt;
        &lt;div&gt;
            Tạo hai network &lt;b&gt;macvlan100&lt;/b&gt; và &lt;b&gt;macvlan200&lt;/b&gt; tương ứng với 2 vlan 100 và 200 và tương ứng với hai &lt;b&gt;parent interface&lt;/b&gt; là &lt;b&gt;eth0.100&lt;/b&gt; và &lt;b&gt;eth0.200&lt;/b&gt;. Sau đó với mỗi macvlan network, tạo 2 container gắn vào để kiểm tra:
&lt;pre&gt;
    &lt;code&gt;
</code></pre>
<h1 id="tao-network-macvlan100_1"><a name="user-content-tao-network-macvlan100_1" href="#tao-network-macvlan100_1" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>tao network <b>macvlan100</b></h1>
<p>docker network  create  -d macvlan \<br />
   &ndash;subnet=172.16.0.0/16 \<br />
    &ndash;ip-range=172.16.2.0/24 \<br />
    -o macvlan_mode=bridge \<br />
    -o parent=eth0.100 macvlan100</p>
<h1 id="tao-container-gan-vao-network-macvlan100_1"><a name="user-content-tao-container-gan-vao-network-macvlan100_1" href="#tao-container-gan-vao-network-macvlan100_1" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>tao container gan vao network <b>macvlan100</b></h1>
<p>docker run &ndash;net=macvlan100 -itd &ndash;name macvlan100_3 alpine /bin/sh<br />
docker run &ndash;net=macvlan100 -itd &ndash;name macvlan100_4 alpine /bin/sh</p>
<h1 id="tao-network-macvlan200_1"><a name="user-content-tao-network-macvlan200_1" href="#tao-network-macvlan200_1" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>tao network <b>macvlan200</b></h1>
<p>docker network  create  -d macvlan \<br />
   &ndash;subnet=10.10.0.0/16 \<br />
    &ndash;ip-range=10.10.2.0/24 \<br />
    -o macvlan_mode=bridge \<br />
    -o parent=eth0.200 macvlan200</p>
<h1 id="tao-container-gan-vao-network-macvlan200_1"><a name="user-content-tao-container-gan-vao-network-macvlan200_1" href="#tao-container-gan-vao-network-macvlan200_1" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>tao container gan vao network <b>macvlan200</b></h1>
<p>docker run &ndash;net=macvlan200 -itd &ndash;name macvlan200_3 alpine /bin/sh<br />
docker run &ndash;net=macvlan200 -itd &ndash;name macvlan200_4 alpine /bin/sh<br />
        </code><br />
    </pre><br />
            </div><br />
            </li><br />
        </ul></p>
<pre><code>    &lt;/div&gt;


&lt;/div&gt;

&lt;/li&gt;

&lt;li&gt;&lt;h3&gt;&lt;a name="container_test"&gt;2.3. Kiểm tra kết nối&lt;/a&gt;&lt;/h3&gt;
&lt;div&gt;
    &lt;ul&gt;
        &lt;li&gt;&lt;b&gt;Docker host 0&lt;/b&gt;
        &lt;div&gt;
            &lt;ul&gt;
                &lt;li&gt;Kiểm tra network &lt;b&gt;macvlan100&lt;/b&gt;
&lt;pre&gt;
    &lt;code&gt;
</code></pre>
<p>docker network inspect macvlan100</p>
<h1 id="ket-qua-tra-ve-tuong-tu-nhu-sau_1"><a name="user-content-ket-qua-tra-ve-tuong-tu-nhu-sau_1" href="#ket-qua-tra-ve-tuong-tu-nhu-sau_1" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>ket qua tra ve tuong tu nhu sau</h1>
<p>[<br />
    {<br />
        &ldquo;Name&rdquo;: &ldquo;macvlan100&rdquo;,<br />
        &ldquo;Id&rdquo;: &ldquo;c26fb15af7893fadd186208a2b9a81d560768fbb4e3919de23874b6b8e75160c&rdquo;,<br />
        &ldquo;Scope&rdquo;: &ldquo;local&rdquo;,<br />
        &ldquo;Driver&rdquo;: &ldquo;macvlan&rdquo;,<br />
        &ldquo;EnableIPv6&rdquo;: false,<br />
        &ldquo;IPAM&rdquo;: {<br />
            &ldquo;Driver&rdquo;: &ldquo;default&rdquo;,<br />
            &ldquo;Options&rdquo;: {},<br />
            &ldquo;Config&rdquo;: [<br />
                {<br />
                    &ldquo;Subnet&rdquo;: &ldquo;172.16.0.0/16&rdquo;,<br />
                    &ldquo;IPRange&rdquo;: &ldquo;172.16.1.0/24&rdquo;<br />
                }<br />
            ]<br />
        },<br />
        &ldquo;Internal&rdquo;: false,<br />
        &ldquo;Containers&rdquo;: {<br />
            &ldquo;1337cc4da1107b578db7abaef50b942a9d4c1213f9564345be9e9460be41f76c&rdquo;: {<br />
                &ldquo;Name&rdquo;: &ldquo;macvlan100_1&rdquo;,<br />
                &ldquo;EndpointID&rdquo;: &ldquo;e3bbabca2d458ddeeaabd89423cbe114c19cf8301585563f6d5804e1b781594e&rdquo;,<br />
                &ldquo;MacAddress&rdquo;: &ldquo;02:42:ac:10:01:01&rdquo;,<br />
                &ldquo;IPv4Address&rdquo;: &ldquo;172.16.1.1/16&rdquo;,<br />
                &ldquo;IPv6Address&rdquo;: &ldquo;&rdquo;<br />
            },<br />
            &ldquo;bfe5b525ee256a6ea284e4efa242f86b0de149d91fc6eb56b9d89e089e445f1f&rdquo;: {<br />
                &ldquo;Name&rdquo;: &ldquo;macvlan100_2&rdquo;,<br />
                &ldquo;EndpointID&rdquo;: &ldquo;9c307d434f9596f8743196de7d2172a7baf61a9664744ca1da26b548a2b7b368&rdquo;,<br />
                &ldquo;MacAddress&rdquo;: &ldquo;02:42:ac:10:01:02&rdquo;,<br />
                &ldquo;IPv4Address&rdquo;: &ldquo;172.16.1.2/16&rdquo;,<br />
                &ldquo;IPv6Address&rdquo;: &ldquo;&rdquo;<br />
            }<br />
        },<br />
        &ldquo;Options&rdquo;: {<br />
            &ldquo;macvlan_mode&rdquo;: &ldquo;bridge&rdquo;,<br />
            &ldquo;parent&rdquo;: &ldquo;eth0.100&rdquo;<br />
        },<br />
        &ldquo;Labels&rdquo;: {}<br />
    }<br />
]<br />
        </code><br />
    </pre><br />
                    </li><br />
                    <li>Kiểm tra network <b>macvlan200</b><br />
    <pre><br />
        <code><br />
docker network inspect macvlan200</p>
<h1 id="ket-qua-tra-ve-tuong-tu-nhu-sau_2"><a name="user-content-ket-qua-tra-ve-tuong-tu-nhu-sau_2" href="#ket-qua-tra-ve-tuong-tu-nhu-sau_2" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>ket qua tra ve tuong tu nhu sau</h1>
<p>[<br />
    {<br />
        &ldquo;Name&rdquo;: &ldquo;macvlan200&rdquo;,<br />
        &ldquo;Id&rdquo;: &ldquo;92fd8a29eef5c37723069be59b2e0542cb452aab6a4caf5880afb00f1df068f3&rdquo;,<br />
        &ldquo;Scope&rdquo;: &ldquo;local&rdquo;,<br />
        &ldquo;Driver&rdquo;: &ldquo;macvlan&rdquo;,<br />
        &ldquo;EnableIPv6&rdquo;: false,<br />
        &ldquo;IPAM&rdquo;: {<br />
            &ldquo;Driver&rdquo;: &ldquo;default&rdquo;,<br />
            &ldquo;Options&rdquo;: {},<br />
            &ldquo;Config&rdquo;: [<br />
                {<br />
                    &ldquo;Subnet&rdquo;: &ldquo;10.10.0.0/16&rdquo;,<br />
                    &ldquo;IPRange&rdquo;: &ldquo;10.10.1.0/24&rdquo;<br />
                }<br />
            ]<br />
        },<br />
        &ldquo;Internal&rdquo;: false,<br />
        &ldquo;Containers&rdquo;: {<br />
            &ldquo;247be6b46b345164156da8206e69622b11ea337afd76fb331d67fbf55f29086a&rdquo;: {<br />
                &ldquo;Name&rdquo;: &ldquo;macvlan200_2&rdquo;,<br />
                &ldquo;EndpointID&rdquo;: &ldquo;95368917bcff5911a2e3a28baab922c0b53bfd533a3bb07c24d62fafa039c484&rdquo;,<br />
                &ldquo;MacAddress&rdquo;: &ldquo;02:42:0a:0a:01:02&rdquo;,<br />
                &ldquo;IPv4Address&rdquo;: &ldquo;10.10.1.2/16&rdquo;,<br />
                &ldquo;IPv6Address&rdquo;: &ldquo;&rdquo;<br />
            },<br />
            &ldquo;3c2bcd3fba71ff55217ec37c5fa7910de258c88d4db1d931da603934b4eaa656&rdquo;: {<br />
                &ldquo;Name&rdquo;: &ldquo;macvlan200_1&rdquo;,<br />
                &ldquo;EndpointID&rdquo;: &ldquo;617df0163b546ae396cb3342c94266559f979b204bb73b4fc149c74c0a2e3578&rdquo;,<br />
                &ldquo;MacAddress&rdquo;: &ldquo;02:42:0a:0a:01:01&rdquo;,<br />
                &ldquo;IPv4Address&rdquo;: &ldquo;10.10.1.1/16&rdquo;,<br />
                &ldquo;IPv6Address&rdquo;: &ldquo;&rdquo;<br />
            }<br />
        },<br />
        &ldquo;Options&rdquo;: {<br />
            &ldquo;macvlan_mode&rdquo;: &ldquo;bridge&rdquo;,<br />
            &ldquo;parent&rdquo;: &ldquo;eth0.200&rdquo;<br />
        },<br />
        &ldquo;Labels&rdquo;: {}<br />
    }<br />
]<br />
        </code><br />
    </pre><br />
                    </li><br />
                </ul><br />
            </div><br />
            </li></p>
<pre><code>        &lt;li&gt;&lt;b&gt;Docker host 1&lt;/b&gt;
        &lt;div&gt;
            &lt;ul&gt;
                &lt;li&gt;Kiểm tra network &lt;b&gt;macvlan100&lt;/b&gt;
&lt;pre&gt;
    &lt;code&gt;
</code></pre>
<p>docker network inspect macvlan100</p>
<h1 id="ket-qua-tra-ve-tuong-tu-nhu-sau_3"><a name="user-content-ket-qua-tra-ve-tuong-tu-nhu-sau_3" href="#ket-qua-tra-ve-tuong-tu-nhu-sau_3" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>ket qua tra ve tuong tu nhu sau</h1>
<p>[<br />
    {<br />
        &ldquo;Name&rdquo;: &ldquo;macvlan100&rdquo;,<br />
        &ldquo;Id&rdquo;: &ldquo;7bba398b5c359e55eebfc80f9817d7cee3f88bbde529984e701f7088405a5e77&rdquo;,<br />
        &ldquo;Scope&rdquo;: &ldquo;local&rdquo;,<br />
        &ldquo;Driver&rdquo;: &ldquo;macvlan&rdquo;,<br />
        &ldquo;EnableIPv6&rdquo;: false,<br />
        &ldquo;IPAM&rdquo;: {<br />
            &ldquo;Driver&rdquo;: &ldquo;default&rdquo;,<br />
            &ldquo;Options&rdquo;: {},<br />
            &ldquo;Config&rdquo;: [<br />
                {<br />
                    &ldquo;Subnet&rdquo;: &ldquo;172.16.0.0/16&rdquo;,<br />
                    &ldquo;IPRange&rdquo;: &ldquo;172.16.2.0/24&rdquo;<br />
                }<br />
            ]<br />
        },<br />
        &ldquo;Internal&rdquo;: false,<br />
        &ldquo;Containers&rdquo;: {<br />
            &ldquo;3815f06e573649143140659ad0fe84463b1a453367e66b5352424c9441c8f221&rdquo;: {<br />
                &ldquo;Name&rdquo;: &ldquo;macvlan100_3&rdquo;,<br />
                &ldquo;EndpointID&rdquo;: &ldquo;b8d3a25bdf6fb85393b1e8791ca26543f480c8706c1caf16a9a07d9b9b35d7e5&rdquo;,<br />
                &ldquo;MacAddress&rdquo;: &ldquo;02:42:ac:10:02:01&rdquo;,<br />
                &ldquo;IPv4Address&rdquo;: &ldquo;172.16.2.1/16&rdquo;,<br />
                &ldquo;IPv6Address&rdquo;: &ldquo;&rdquo;<br />
            },<br />
            &ldquo;5abbcd73cd44db795c8002c7f39aee127c3cb2daa56de607c71d9834cc450945&rdquo;: {<br />
                &ldquo;Name&rdquo;: &ldquo;macvlan100_4&rdquo;,<br />
                &ldquo;EndpointID&rdquo;: &ldquo;520b2fa68e43febc09ef457c022e54d65a649f43f2c3c8aaf0b380b4ca96dbb1&rdquo;,<br />
                &ldquo;MacAddress&rdquo;: &ldquo;02:42:ac:10:02:02&rdquo;,<br />
                &ldquo;IPv4Address&rdquo;: &ldquo;172.16.2.2/16&rdquo;,<br />
                &ldquo;IPv6Address&rdquo;: &ldquo;&rdquo;<br />
            }<br />
        },<br />
        &ldquo;Options&rdquo;: {<br />
            &ldquo;macvlan_mode&rdquo;: &ldquo;bridge&rdquo;,<br />
            &ldquo;parent&rdquo;: &ldquo;eth0.100&rdquo;<br />
        },<br />
        &ldquo;Labels&rdquo;: {}<br />
    }<br />
]     <br />
        </code><br />
    </pre><br />
                    </li></p>
<pre><code>                &lt;li&gt;Kiểm tra network &lt;b&gt;macvlan200&lt;/b&gt;
&lt;pre&gt;
    &lt;code&gt;
</code></pre>
<p>docker network inspect macvlan200</p>
<h1 id="ket-qua-tra-ve-tuong-tu-nhu-sau_4"><a name="user-content-ket-qua-tra-ve-tuong-tu-nhu-sau_4" href="#ket-qua-tra-ve-tuong-tu-nhu-sau_4" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>ket qua tra ve tuong tu nhu sau</h1>
<p>[<br />
    {<br />
        &ldquo;Name&rdquo;: &ldquo;macvlan200&rdquo;,<br />
        &ldquo;Id&rdquo;: &ldquo;e47292c791c2cad8597e162a45693ee4f33dd291d06792dc67727e80596c731d&rdquo;,<br />
        &ldquo;Scope&rdquo;: &ldquo;local&rdquo;,<br />
        &ldquo;Driver&rdquo;: &ldquo;macvlan&rdquo;,<br />
        &ldquo;EnableIPv6&rdquo;: false,<br />
        &ldquo;IPAM&rdquo;: {<br />
            &ldquo;Driver&rdquo;: &ldquo;default&rdquo;,<br />
            &ldquo;Options&rdquo;: {},<br />
            &ldquo;Config&rdquo;: [<br />
                {<br />
                    &ldquo;Subnet&rdquo;: &ldquo;10.10.0.0/16&rdquo;,<br />
                    &ldquo;IPRange&rdquo;: &ldquo;10.10.2.0/24&rdquo;<br />
                }<br />
            ]<br />
        },<br />
        &ldquo;Internal&rdquo;: false,<br />
        &ldquo;Containers&rdquo;: {<br />
            &ldquo;daac8f6303dedd0ddb5ac5d74fdb41521fff0a1b6d0dc64d51bc22c7b557d753&rdquo;: {<br />
                &ldquo;Name&rdquo;: &ldquo;macvlan200_4&rdquo;,<br />
                &ldquo;EndpointID&rdquo;: &ldquo;76819fbcf7f0786bcde33f8423fb540a745da3bcbc72e68bc451db883cf1e697&rdquo;,<br />
                &ldquo;MacAddress&rdquo;: &ldquo;02:42:0a:0a:02:01&rdquo;,<br />
                &ldquo;IPv4Address&rdquo;: &ldquo;10.10.2.1/16&rdquo;,<br />
                &ldquo;IPv6Address&rdquo;: &ldquo;&rdquo;<br />
            },<br />
            &ldquo;f187d3ed05d2dc18ba0c5dc59db77118ad7fd61daa5a7672c4c2610256920c7b&rdquo;: {<br />
                &ldquo;Name&rdquo;: &ldquo;macvlan200_3&rdquo;,<br />
                &ldquo;EndpointID&rdquo;: &ldquo;6af0de31e5342b503d4d58073c4bcb034e85eac42af0d1c8b9e2af573f838919&rdquo;,<br />
                &ldquo;MacAddress&rdquo;: &ldquo;02:42:0a:0a:02:02&rdquo;,<br />
                &ldquo;IPv4Address&rdquo;: &ldquo;10.10.2.2/16&rdquo;,<br />
                &ldquo;IPv6Address&rdquo;: &ldquo;&rdquo;<br />
            }<br />
        },<br />
        &ldquo;Options&rdquo;: {<br />
            &ldquo;macvlan_mode&rdquo;: &ldquo;bridge&rdquo;,<br />
            &ldquo;parent&rdquo;: &ldquo;eth0.200&rdquo;<br />
        },<br />
        &ldquo;Labels&rdquo;: {}<br />
    }<br />
]     <br />
        </code><br />
    </pre><br />
                    </li><br />
                </ul><br />
            </div><br />
            </li></p>
<pre><code>        &lt;li&gt;Kiểm tra kết nối 
        &lt;ul&gt;
            &lt;li&gt;Trên &lt;b&gt;Docker host 1&lt;/b&gt; thực hiện ping thử giữa hai máy cùng vlan 100 hay cùng mạng &lt;b&gt;macvlan100&lt;/b&gt;(&lt;b&gt;macvlan100_3&lt;/b&gt; với địa chỉ &lt;code&gt;172.16.2.1/16&lt;/code&gt;và &lt;b&gt;macvlan100_4&lt;/b&gt; với địa chỉ &lt;code&gt;172.16.2.2/16&lt;/code&gt;)
&lt;pre&gt;
    &lt;code&gt;
</code></pre>
<p>docker exec -ti macvlan100_3 ping 172.16.2.2 -c 4</p>
<h1 id="ket-qua-tra-ve-tuong-tu-nhu-sau_5"><a name="user-content-ket-qua-tra-ve-tuong-tu-nhu-sau_5" href="#ket-qua-tra-ve-tuong-tu-nhu-sau_5" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>ket qua tra ve tuong tu nhu sau</h1>
<p>PING 172.16.2.2 (172.16.2.2): 56 data bytes<br />
64 bytes from 172.16.2.2: seq=0 ttl=64 time=0.869 ms<br />
64 bytes from 172.16.2.2: seq=1 ttl=64 time=0.090 ms<br />
64 bytes from 172.16.2.2: seq=2 ttl=64 time=0.093 ms<br />
64 bytes from 172.16.2.2: seq=3 ttl=64 time=0.090 ms</p>
<p>&mdash; 172.16.2.2 ping statistics &mdash;<br />
4 packets transmitted, 4 packets received, 0% packet loss<br />
round-trip min/avg/max = 0.090/0.285/0.869 ms<br />
        </code><br />
    </pre><br />
                </li></p>
<pre><code>            &lt;li&gt;Kiểm tra kết nối giữa hai máy cùng vlan 200 trên 2 host, cụ thể thực hiện ping giữa container &lt;b&gt;macvlan200_3&lt;/b&gt; trên &lt;b&gt;Docker host 1&lt;/b&gt; với địa chỉ &lt;code&gt;10.10.2.2&lt;/code&gt; tới container &lt;b&gt;macvlan200_1&lt;/b&gt; trên &lt;b&gt;Docker host 0&lt;/b&gt; với địa chỉ &lt;code&gt;10.10.1.1&lt;/code&gt;
&lt;pre&gt;
    &lt;code&gt;
</code></pre>
<p>docker exec -ti macvlan200_3 ping 10.10.1.1 -c 4</p>
<h1 id="ket-qua-tra-ve-se-tuong-tu-nhu-sau"><a name="user-content-ket-qua-tra-ve-se-tuong-tu-nhu-sau" href="#ket-qua-tra-ve-se-tuong-tu-nhu-sau" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>ket qua tra ve se tuong tu nhu sau</h1>
<p>PING 10.10.1.1 (10.10.1.1): 56 data bytes<br />
64 bytes from 10.10.1.1: seq=0 ttl=64 time=2.351 ms<br />
64 bytes from 10.10.1.1: seq=1 ttl=64 time=0.712 ms<br />
64 bytes from 10.10.1.1: seq=2 ttl=64 time=1.065 ms<br />
64 bytes from 10.10.1.1: seq=3 ttl=64 time=0.748 ms</p>
<p>&mdash; 10.10.1.1 ping statistics &mdash;<br />
4 packets transmitted, 4 packets received, 0% packet loss<br />
round-trip min/avg/max = 0.712/1.219/2.351 ms<br />
        </code><br />
    </pre><br />
                </li><br />
            </ul><br />
            </li></p>
<pre><code>    &lt;/ul&gt;

&lt;/div&gt;
&lt;/li&gt;
</code></pre>
<p></ul><br />
<h2><a name="ref">3. Tham khảo</a></h2><br />
[1] - <a href="https://sreeninet.wordpress.com/2016/05/29/docker-macvlan-and-ipvlan-network-plugins/"><a href="https://sreeninet.wordpress.com/2016/05/29/docker-macvlan-and-ipvlan-network-plugins/">https://sreeninet.wordpress.com/2016/05/29/docker-macvlan-and-ipvlan-network-plugins/</a></a><br />
<br><br />
[2] - <a href="http://blog.scottlowe.org/2013/05/28/vlan-trunking-to-guest-domains-with-open-vswitch/"><a href="http://blog.scottlowe.org/2013/05/28/vlan-trunking-to-guest-domains-with-open-vswitch/">http://blog.scottlowe.org/2013/05/28/vlan-trunking-to-guest-domains-with-open-vswitch/</a></a></p></article></body></html>